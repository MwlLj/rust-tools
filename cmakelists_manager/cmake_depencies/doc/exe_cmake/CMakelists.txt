set(git_librarys
	
)

INCLUDE_DIRECTORIES(
	${HEADER_DIR}
	${THIRD_HEADER_DIR}
	${HEADER_DIR}/cbb11commonlogic
	${HEADER_DIR}/cbb11commonlogic/sql
	${HEADER_DIR}/cbb12commu
	${HEADER_DIR}/framework
	${HEADER_DIR}/cbb38svrapi/
	${HEADER_DIR}/cbb38svrapi/dahapi
	${HEADER_DIR}/framework/jsonconverter
	${HEADER_DIR}/cbb95logicdata/iotas_baseconfig
	${THIRD_HEADER_DIR}/hk
	${THIRD_HEADER_DIR}/hk/net
	include/
	${PROJECT_SOURCE_DIR}/03implement/svr16iotas_acd
	"D:\\liujun\\github\\rust-tools\\cmakelists_manager\\cmake_depencies\\doc\\lib_config\\test\\include\\0.1.10"

)

LINK_DIRECTORIES (
	${LINK_LIBRARIES_DIR}
	"D:\\liujun\\github\\rust-tools\\cmakelists_manager\\cmake_depencies\\doc\\lib_config\\test\\lib\\0.1.10\\win64"
"D:\\liujun\\github\\rust-tools\\cmakelists_manager\\cmake_depencies\\doc\\lib_config\\http_server\\lib\\0.1.0\\win64"
"D:\\liujun\\github\\rust-tools\\cmakelists_manager\\cmake_depencies\\doc\\lib_config\\openssl\\lib\\1.0.0\\win64"

)

SET(TARGET_NAME iotas_acd_hk${FILE_PREFIX})

SET(TARGET_INSTALL_DIR "${INSTALL_BIN_DIR}/service/iotas_acd_hk")

AUX_SOURCE_DIRECTORY (source/ SOURCE_LIST)

FILE(GLOB HEADER_LIST "include/*.h")

SET(LIBRARIES_NAME
	iotas_acd_client
	iotas_acd_client_db
	dahapi_iac
	dahapi
	mq_sender
	iotas_baseconfig
	aw_client
	configtool
	curlclient
	charsetconv
	sql
	log
	ospathtool
	logictool
	stringtool
	timetool
)

INCLUDE (${CMAKE_PREFIX_PATH}/09compile/GenerateLinkLibraries.cmake)

ADD_EXECUTABLE(${TARGET_NAME} ${SOURCE_LIST} ${HEADER_LIST})

SET_TARGET_PROPERTIES(${TARGET_NAME} PROPERTIES DEBUG_POSTFIX "_d")

IF (${OS} STREQUAL "WINDOWS")
		TARGET_LINK_LIBRARIES(${TARGET_NAME}
			debug test-0.1.10-abcd.m.1_d release test-0.1.10-abcd.m.1
debug http_server-0.1.0-abcd.m.1_d release http_server-0.1.0-abcd.m.1
debug openssl1.0.0${FILE_PREFIX}_d release openssl1.0.0${FILE_PREFIX}

		)
		
		INSTALL (TARGETS ${TARGET_NAME} RUNTIME CONFIGURATIONS Release DESTINATION ${TARGET_INSTALL_DIR})
		
		INSTALL (DIRECTORY "${INSTALL_BIN_DIR}/third_dll/hk/net/" DESTINATION ${TARGET_INSTALL_DIR})
		
		INSTALL (DIRECTORY "${INSTALL_BIN_DIR}/third_dll/openssl/" DESTINATION ${TARGET_INSTALL_DIR})
		INSTALL (DIRECTORY "${INSTALL_BIN_DIR}/third_dll/pthread/" DESTINATION ${TARGET_INSTALL_DIR})
		
		INSTALL (FILES "${INSTALL_BIN_DIR}/third_dll/anywhere_net/anywhere_net64.dll" DESTINATION ${TARGET_INSTALL_DIR})
		INSTALL (FILES "${INSTALL_BIN_DIR}/third_dll/curl/libcurl.dll" DESTINATION ${TARGET_INSTALL_DIR})
		INSTALL (FILES "${INSTALL_BIN_DIR}/third_dll/mosquitto/mosquitto.dll" DESTINATION ${TARGET_INSTALL_DIR})
		INSTALL (FILES "${INSTALL_BIN_DIR}/third_dll/mosquitto_broker/broker.dll" DESTINATION ${TARGET_INSTALL_DIR})
ELSEIF (${OS} STREQUAL "LINUX")
		TARGET_LINK_LIBRARIES(${TARGET_NAME}
						debug test-0.1.10-abcd.m.1_d release test-0.1.10-abcd.m.1
debug http_server-0.1.0-abcd.m.1_d release http_server-0.1.0-abcd.m.1
debug openssl1.0.0${FILE_PREFIX}_d release openssl1.0.0${FILE_PREFIX}

		)

		IF (${CMAKE_BUILD_TYPE} STREQUAL "Release")
				ADD_CUSTOM_COMMAND(TARGET ${TARGET_NAME} POST_BUILD	COMMAND echo "strip"
							COMMAND ${STRIP} ${CMAKE_LIBRARY_OUTPUT_DIRECTORY}/${TARGET_NAME}
							COMMAND mkdir -p ~/nfs/iotas/service/iotas_acd_hk
							COMMAND cp -f ${CMAKE_LIBRARY_OUTPUT_DIRECTORY}/${TARGET_NAME} ~/nfs/iotas/service/iotas_acd_hk
							COMMAND cp -Rf ${INSTALL_BIN_DIR}/third_dll/hk/net/* ~/nfs/iotas/service/iotas_acd_hk
							COMMAND mkdir -p ${TARGET_INSTALL_DIR}
							COMMAND cp -f ${CMAKE_LIBRARY_OUTPUT_DIRECTORY}/${TARGET_NAME} ${TARGET_INSTALL_DIR}
							COMMAND cp -Rf ${INSTALL_BIN_DIR}/third_dll/hk/net/* ${TARGET_INSTALL_DIR}
			)
		ENDIF()
ENDIF()
